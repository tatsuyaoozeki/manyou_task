<div class="search_form">
  <%= form_tag(root_path, :method => 'get') do %>
    <%= text_field_tag :name, params[:search], :placeholder => "タスク名", class: "form-control", id: "sbox1" %>
    <div class="status"><%= t('.status') %></div>
    <%= select_tag :status, options_for_select([["", ""], ["未着手", "0"], ["作業中", "1"], ["完了", "2"]]), class: "status_sel" %>
    <%= submit_tag 'search', :name => nil, :status => nil %>
  <% end %>
</div>

<table class="table table-striped table-dark">
  <h1><%= t('.index_title') %></h1>
  <p><%= notice %></p>
  <tr>
    <th><%= t('.name') %></th>
    <th><%= t('.content') %></th>
    <th><%= t('.created_at') %></th>
    <th><%= t('.status') %></th>
    <th><%= link_to t('.priority'), tasks_path(sort_priority:"true") %></th>
    <th><%= link_to t('.deadline_sort'), tasks_path(sort_expired:"true") %></th>
  </tr>
  <% @tasks.each do |task| %>
  <tr>
    <td><%= task.name %></td>
    <td><%= task.content %></td>
    <td><%= task.created_at.strftime("%Y-%m-%d%H:%M") %></td>
    <td><%= task.status_i18n %></td>
    <td><%= task.priority_i18n %></td>
    <td><%= task.deadline.strftime("%Y-%m-%d%H:%M") %></td>
    <td id="show"><%= link_to t('.show_task'), task_path(task.id) %></td>
    <td><%= link_to t('.show_edit'), edit_task_path(task.id), data: { confirm: '本当に編集していいですか？' } %></td>
    <td><%= link_to t('.show_destroy'), task_path(task.id), method: :delete, data: { confirm: '本当に削除していいですか？' } %></td>
  </tr>
  <% end %>
</table>

<%= link_to t('.create_task'), new_task_path %>
<%= paginate @task %>
</div>
